# Infotecs TechTask
#### –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

–î–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–æ—à–µ–ª—å–∫–∞—Ö –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö. 
–í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ—à–µ–ª—å–∫–∞–∫ –∏ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. 

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–ø—É—Å–∫—É](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-–∑–∞–ø—É—Å–∫—É)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫ API](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-–∫-api-–∏-–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)
- [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
---
- –ö–∞–∫ –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ PostgreSQL.
- –ë–î, –∫–∞–∫ –∏ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫—Ä—É—Ç—è—Ç—Å—è –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.
- –¢–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∫–∞—Ç—ã–≤–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –ë–î.
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –≤ docker-compose.yaml 
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω CI/CD –ø–∞–π–ø–ª–∞–π–Ω.
- –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã (–≤ —Ç–æ–º —á–∏—Å–ª–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ) –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TestContainers
- –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è handler —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º testify
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Rate limiter 

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –ø–∞–∫–µ—Ç—ã
---
- [github.com/gin-gonic/gin](https://pkg.go.dev/github.com/gin-gonic/gin@v1.10.1) - –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [github.com/jackc/pgx](https://pkg.go.dev/github.com/jackc/pgx@v3.6.2+incompatible) - –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ –Ω–∞—Ç–∏–≤–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–∞–∫–µ—Ç–∞ sql
- [github.com/lib/pq](https://pkg.go.dev/github.com/lib/pq@v1.10.9) - –≤—ã–±—Ä–∞–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ Postgres-–¥—Ä–∞–π–≤–µ—Ä–∞
- [github.com/google/uuid](https://pkg.go.dev/github.com/google/uuid@v1.6.0) - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ UUID
- [Docker](https://www.docker.com/) - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- [Github Actions] - –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ —Ç–µ—Å—Ç–æ–≤

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
---
–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –±—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã:
- [github.com/testcontainers/testcontainers-go/modules/postgres](https://www.red-gate.com/products/flyway/community/) - Postgres TestContainer
- [github.com/stretchr/testify](https://assertj.github.io/doc/) - –ø–∞–∫–µ—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫—Ä—ã—Ç —é–Ω–∏—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏. –ù–∞–ø–∏—Å–∞–Ω—ã —é–Ω–∏—Ç —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è handler–∞
–¢–∞–∫–∂–µ –Ω–∞–ø–∏—Å–∞–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é TestContainers –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–ø—É—Å–∫—É
---
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º Docker.

### –ó–∞–ø—É—Å–∫
---
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```sh
$ docker compose up
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 8080.

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫ API –∏ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
---

#### 1. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤**  
**`POST /api/send`**  
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–µ–∂–¥—É –∫–æ—à–µ–ª—å–∫–∞–º–∏.  

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON)**:
```json
{
  "from": "e240d825d255af751f5f55af8d9671beabdf2236c0a3b4e2639b3e182d994c88e",
  "to": "9b3e182d994c88ee240d825d255af751f5f55af8d9671beabdf2236c0a3b4e26",
  "amount": 3.50
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
| –ü–æ–ª–µ    | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|---------|---------|-------------|------------------------------|
| from    | string  | –î–∞          | –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è   |
| to      | string  | –î–∞          | –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞-–ø–æ–ª—É—á–∞—Ç–µ–ª—è    |
| amount  | float   | –î–∞          | –°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ (>0)          |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:
```bash
curl -X POST http://localhost:8080/api/send \
  -H "Content-Type: application/json" \
  -d    '{
            "from": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a10",
            "to": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a14",
            "amount": 3.50
        }'
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç** (`200 OK`):
```json
{
  "id": "h7hgyh54-3m7q-9h8t-xp6t-1cp8qe487b10",
  "from": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a10",
  "to": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a14",
  "amount": 3.50,
  "timestamp": "2025-08-08T14:30:00Z"
}
```

**–û—à–∏–±–∫–∏**:
- `400 Bad Request` - –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "error": "Validation failed",
  "details": [
      {
          "field": "FromAddress",
          "message": "Field is required"
      }
  ]
}
```

- `400 Bad Request` - –ö–æ—à–µ–ª–µ–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω:
```json
{
  "error": "Sender wallet not found"
}
```

- `400 Bad Request` - –ö–æ—à–µ–ª–µ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω:
```json
{
  "error": "Recipient wallet not found"
}
```

---

#### 2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**  
**`GET /api/transactions`**  
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç N –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.  

**Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø  | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|----------|------|-------------|------------------------------|
| count    | int  | –ù–µ—Ç         | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π        |

–ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:
```bash
curl "http://localhost:8080/api/transactions?count=2"
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç** (`200 OK`):
```json
[
    {
        "id": "h7hgyh54-3m7q-9h8t-xp6t-1cp8qe487b10",
        "from": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a10",
        "to": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a14",
        "amount": 3.50,
        "status": "completed",
        "message": "Transaction completed",
        "timestamp": "2025-08-08T14:30:00Z"
    },
    {
        "id": "h7hgyh54-3m7q-9h8t-xp6t-1cp8qe487b11",
        "from": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a10",
        "to": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a14",
        "amount": 3.50,
        "status": "failed",
        "message": "Sender does not have enough balance",
        "timestamp": "2025-08-08T14:30:00Z"
    }
]
```

**–û—à–∏–±–∫–∏**:
- `400 Bad Request` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä count:
```json
{
  "error": "Invalid query parameters"
}
```

---

#### 3. **–ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞**  
**`GET /api/wallet/{address}/balance`**  
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–ª–∞–Ω—Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞.  

**Path-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø    | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ          |
|----------|---------|-------------|-------------------|
| address  | uuid  | –î–∞          | –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞    |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:
```bash
curl http://localhost:8080/api/wallet/b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a10/balance
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç** (`200 OK`):
```json
{
    "id": "b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a10",
    "balance": 100      
}
```

**–û—à–∏–±–∫–∏**:
- `404 Not Found` - –ö–æ—à–µ–ª–µ–∫ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
```json
{
  "error": "Wallet not found"
}
```

---

### –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### üì§ –£—Å–ø–µ—à–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
**–ó–∞–ø—Ä–æ—Å**:
```json
POST /api/send
{
  "from": "wallet_A",
  "to": "wallet_B",
  "amount": 10.0
}
```
**–û—Ç–≤–µ—Ç**:
```json
200 OK
{
  "id": "txn_12345",
  "from": "wallet_A",
  "to": "wallet_B",
  "amount": 10.0,
  "status": "completed",
  "message": "Transaction completed",
  "timestamp": "2025-08-08T15:00:00Z"
}
```

#### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
**–ó–∞–ø—Ä–æ—Å**:
```json
POST /api/send
{
  "from": "wallet_A",
  "to": "wallet_B",
  "amount": 1000.0
}
```
**–û—Ç–≤–µ—Ç**:
```json
200 OK
{
  "id": "txn_12345",
  "from": "wallet_A",
  "to": "wallet_B",
  "amount": 1000.0,
  "status": "failed",
  "message": "Sender does not have enough balance",
  "timestamp": "2025-08-08T15:00:00Z"
}
```

#### üìú –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
**–ó–∞–ø—Ä–æ—Å**:
```
GET /api/transactions?count=3
```
**–û—Ç–≤–µ—Ç**:
```json
200 OK
[
  {"id": "txn3", "amount": 5.0, ...},
  {"id": "txn2", "amount": 2.5, ...},
  {"id": "txn1", "amount": 10.0, ...}
]
```

#### üí∞ –ó–∞–ø—Ä–æ—Å –±–∞–ª–∞–Ω—Å–∞
**–ó–∞–ø—Ä–æ—Å**:
```
GET /api/wallet/wallet_A/balance
```
**–û—Ç–≤–µ—Ç**:
```json
200 OK
{
  "id": "wallet_A",
  "balance": 85.30
}
```

---

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
1. **–§–æ—Ä–º–∞—Ç –∞–¥—Ä–µ—Å–æ–≤**:  
   –°—Ç—Ä–æ–∫–∞ –∏–∑ 64 hex-—Å–∏–º–≤–æ–ª–æ–≤ (`[a-f0-9]{64}`)
   
2. **–§–æ—Ä–º–∞—Ç —Å—É–º–º**:  
   - –í—Å–µ —Å—É–º–º—ã —Å –¥–≤—É–º—è –∑–Ω–∞–∫–∞–º–∏ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: 0.01

3. **–§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏**:  
   ISO 8601 –≤ UTC: `YYYY-MM-DDThh:mm:ssZ`

4. **–õ–∏–º–∏—Ç—ã**:  
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ç–µ—á–µ–Ω–∏–µ 1 –º–∏–Ω—É—Ç—ã —Å –æ–¥–Ω–æ–≥–æ IP: 100

5. **–ó–∞–≥–æ–ª–æ–≤–∫–∏**:  
   –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç:  
   ```http
   Content-Type: application/json
   ```


### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π API –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:
- –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏–π

